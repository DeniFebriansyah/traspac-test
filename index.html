<!DOCTYPE html>
<html>

<head>
    <title>Text Processing Tool</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            padding: 20px;
        }

        textarea {
            resize: vertical;
        }
    </style>
</head>

<body class="bg-light">
    <div class="container">
        <h1 class="text-center mb-4">Text Processing Tool</h1>

        <div class="card mb-4">
            <div class="card-header">
                <h2 class="h5 mb-0">Input Article</h2>
            </div>
            <div class="card-body">
                <textarea class="form-control" id="articleInput" rows="8"
                    placeholder="Paste your article here..."></textarea>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header">
                <h2 class="h5 mb-0">Word Search</h2>
            </div>
            <div class="card-body">
                <div class="input-group mb-3">
                    <input type="text" class="form-control" id="searchWord" placeholder="Enter word to search">
                    <button class="btn btn-primary">Search</button>
                </div>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header">
                <h2 class="h5 mb-0">Replace Words</h2>
            </div>
            <div class="card-body">
                <div class="row g-3 mb-3">
                    <div class="col-md-5">
                        <input type="text" class="form-control" id="oldWord" placeholder="Word to replace">
                    </div>
                    <div class="col-md-5">
                        <input type="text" class="form-control" id="newWord" placeholder="New word">
                    </div>
                    <div class="col-md-2">
                        <button class="btn btn-primary w-100" id="repButton">Replace</button>
                    </div>
                </div>
                <div id="replaceResult"></div>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header">
                <h2 class="h5 mb-0">Sort Words</h2>
            </div>
            <div class="card-body">
                <button class="btn btn-primary mb-3" id="sortWord">Sort Alphabetically</button>
                <div id="sortResult"></div>
            </div>
        </div>
    </div>
    <!-- Toast Berhasil -->
    <div class="toast-container position-fixed top-0 end-0 p-3">
        <div id="successToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-body bg-success" id="resSuccess">
            </div>
        </div>
    </div>
    <!-- toast gagal -->
    <div class="toast-container position-fixed top-0 end-0 p-3">
        <div id="errorToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-body bg-danger" id="resError">
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#searchWord').next('button').on('click', function () {
                const article = $('#articleInput').val().toLowerCase();
                const searchWord = $('#searchWord').val().toLowerCase();
                const words = article.split(/\s+/); //memecah teks inputan menjadi array perkata
                //mengecek apakah kata yang dicari ada di dalam teks menggunakan filter js
                const foundWords = words.filter(word => word === searchWord);

                if (foundWords.length > 0) {
                    const toast = new bootstrap.Toast($('#successToast'));
                    toast.show();
                    $('#resSuccess').text(
                        `Kata "${searchWord}" ditemukan sebanyak ${foundWords.length} kali didalam teks.`
                    ).addClass('text-white');
                } else {
                    const toast = new bootstrap.Toast($('#errorToast'));
                    toast.show();
                    $('#resError').text(
                        `Kata "${searchWord}" tidak ditemukan kali didalam teks.`
                    ).addClass('text-white');
                }
            });

            $('#repButton').on('click', function () {
                const article = $('#articleInput').val();
                const oldWord = $('#oldWord').val();
                const newWord = $('#newWord').val();
                //memisahkan kata yang akan diganti dengan spasi
                const oldText = article.split(' ' + oldWord + ' ');
                //mengganti kata yang akan diganti dengan kata yang baru
                const replacedText = oldText.join(' ' +
                    `<span style="background-color: yellow">${newWord}</span>` + ' ');
                //menampilkan hasil penggantian kata
                $('#replaceResult').html('<h6 class="mb-3">Artikel yang diganti:</h6><p class="mb-0">' +
                    replacedText + '</p>');
                const toast = new bootstrap.Toast($('#successToast'));
                toast.show();
                $('#resSuccess').text(
                    `Berhasil Mengganti kata "${oldWord}" menjadi kata ${newWord} sebanyak ${oldText.length - 1} kali didalam teks.`
                ).addClass('text-white');
            });
            $('#sortWord').on('click', function () {
                const article = $('#articleInput').val();
                const words = article.toLowerCase()
                    .replace(/[^\w\s]/g, '').split(/\s+/).filter(word => word.length > 0);

                const uniqueWords = [...new Set(words)].sort();

                const sortedList = uniqueWords
                    .map(word => `<li class="list-group-item">${word}</li>`)
                    .join('');

                $('#sortResult').html('<h6 class="mb-3">Sorted Words:</h6><ul class="list-group">' +
                    sortedList + '</ul>');
                const toast = new bootstrap.Toast($('#successToast'));
                toast.show();
                $('#resSuccess').text(
                    `Mengurutkan kata-kata dalam teks sebanyak ${uniqueWords.length} kata.`
                ).addClass('text-white');
            });
        });
    </script>
</body>

</html>